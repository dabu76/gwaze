<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>계산기</title>
    <style>
        *{ box-sizing: border-box}
        #result{width :180px; height:50px; margin:5px; text-align: right;}
        #operator{width: 50px;height: 50px;margin:5px; text-align: center;}
        button{width: 50px;height: 50px; margin: 5px;}
    </style>
</head>
<!--계산기 버튼 구현-->
<body>
    <input readonly id="operator">
    <input readonly type="number" id="result">
        <div class ="row">
            <button id="num-7">7</button>
            <button id="num-8">8</button>
            <button id="num-9">9</button>
            <button id="plus">+</button>
        </div>
        <div class ="row">
            <button id="num-4">4</button>
            <button id="num-5">5</button>
            <button id="num-6">6</button>
            <button id="minus">-</button>
        </div>
        <div class ="row">
            <button id="num-1">1</button>
            <button id="num-2">2</button>
            <button id="num-3">3</button>
            <button id="devide">/</button>
        </div>
        <div class ="row">
            <button id="clear">c</button>
            <button id="num-0">0</button>
            <button id="calculate">=</button>
            <button id="multiply">x</button>
        </div>
<script>
    let numOne = '';
    let operator='';
    let numTwo = '';
    const $operator = document.querySelector('#operator');
    const $result = document.querySelector('#result');
    const onClickNumber = (event) => { // onClickNumber라는 함수를 정의하고, 매개변수에 이벤트 (클릭했을때의 변화)를 받아서
    
        if (!operator) {// operator가 없으면
            numOne += event.target.textContent; // 이벤트를 받은 타겟에 이벤트 값을줌
            $result.value += event.target.textContent; // 화면에 출력되는 결과에 이벤트 값을 추가
            return; //그 값을 반환
        }
            if(!numTwo){ //넘투가 없으면
                result.value=''; //리절트의 값을 공백으로 만들고
            }
            numTwo += event.target.textContent; // 이벤트를 받은 타겟에 이벤트 값을줌
            $result.value += event.target.textContent; // 화면에 출력되는 결과에 이벤트 값을 추가
        };
          //이렇게 줄수있는 이유는 클로저라는개념으로 인해서 인데 클로저라는것은 함수가 선언될때 환경(스코프 = 범위) 를 기억해서 
         //그함수가 나중에 실행될때에도 함수가 정의된 당시의 변수를 가져와 참조할수있기때문에

   
        document.querySelector('#num-0').addEventListener('click',onClickNumber);
        document.querySelector('#num-1').addEventListener('click',onClickNumber);
        document.querySelector('#num-2').addEventListener('click',onClickNumber);
        document.querySelector('#num-3').addEventListener('click',onClickNumber);
        document.querySelector('#num-4').addEventListener('click',onClickNumber);
        document.querySelector('#num-5').addEventListener('click',onClickNumber);
        document.querySelector('#num-6').addEventListener('click',onClickNumber);
        document.querySelector('#num-7').addEventListener('click',onClickNumber);
        document.querySelector('#num-8').addEventListener('click',onClickNumber);
        document.querySelector('#num-9').addEventListener('click',onClickNumber);
        const calculate = () =>{ //계산식을 누르면
            if(numTwo){ // 넘버투에 숫자가 있다면
                switch(operator){ //오퍼레이터가 있을때
                    case '+': //+라면 두개를 더하고 
                        $result.value=parseInt(numOne)+parseInt(numTwo);
                        break; //브레이크
                    case '-': //-라면 빼기
                        $result.value=numOne-numTwo;
                        break;
                    case '*': //* 곱하기
                    $result.value=numOne*numTwo;
                        break;
                    case '/': // 라면 나누기
                    $result.value=numOne/numTwo;
                        break;
                    default: // false라면 break 
                        break;
                }
                $operator.value=''; //하고나면 operator를 공백으로 만들고
                numOne =$result.value; // 리절트에 나온결과를 numone로 옮긴다
                operator =''; // 오퍼레이터와 넘투의 값을 공백으로만든다
                numTwo='';
            }else{
                alert('숫자입력');
            }
        };
        const onClickOperator =(op)=>()=>{ // 오퍼레이터를 누르면 op에 값을 주고 공백함수에 저장  
            if(numTwo){//만약 넘투에 값이 있다면
                calculate(); //위의 캘큘레이터를 실행
                operator=op; //(오퍼레이터는 위의 op값을주고)
                $operator.value=op; // 변수에도 저장
            }else if(numOne){// 넘원이 있다면 (넘투가 없다는뜻) 
                operator=op; //오퍼레이터값을받고
                $operator.value=op; //변수에도 저장
            }else{
                alert('숫자입력'); //아무것도 없다면 숫자를 입력하라고 알람이뜸
            }
        }
        document.querySelector('#plus').addEventListener('click',onClickOperator('+'));
        document.querySelector('#minus').addEventListener('click',onClickOperator('-'));
        document.querySelector('#devide').addEventListener('click',onClickOperator('/'));
        document.querySelector('#multiply').addEventListener('click',onClickOperator('*'));
        document.querySelector('#calculate').addEventListener('click',calculate);
        document.querySelector('#clear').addEventListener('click', () => {
            $operator.value ='';
            operator.value ='';
            numTwo ='';
            numone ='';
            $result.value = '';
        });
   
</script>

</body>
